#N canvas 121 106 849 530 10;
#X obj 673 138 s \$1.NETPD;
#X obj 673 215 routeOSC /\$2;
#X obj 673 73 list prepend /\$2;
#X obj 673 95 list prepend send;
#X obj 673 117 list trim;
#X obj 673 49 r \$0.send;
#X obj 673 237 s \$0.receive;
#X obj 232 363 table \$0.compare \$3;
#X obj 233 47 r \$1-\$2;
#X obj 235 271 s \$0.send;
#X obj 14 276 r \$0.receive;
#N canvas 503 188 360 535 unpack.delta 0;
#X obj 11 14 inlet;
#X obj 30 83 list prepend 0;
#X obj 38 493 outlet;
#X obj 30 107 s \$0.unpack;
#X obj 178 17 table \$0.unpack 2000;
#X msg 50 62 const 0;
#X obj 11 37 t b a b;
#X msg 11 135 0;
#X obj 11 211 tabread \$0.unpack;
#X obj 30 259 until;
#X obj 181 80 r \$0.counter.in;
#X obj 181 132 f;
#X obj 181 102 route bang float;
#X obj 215 132 + 1;
#X obj 181 167 s \$0.counter.out;
#X obj 11 157 t b a;
#N canvas 483 421 180 198 counter 0;
#X obj 42 81 s \$0.counter.in;
#X obj 42 101 r \$0.counter.out;
#X obj 15 122 f;
#X obj 15 40 route bang;
#X obj 15 62 t b b;
#X obj 15 13 inlet;
#X obj 15 145 outlet;
#X connect 1 0 2 1;
#X connect 2 0 6 0;
#X connect 3 0 4 0;
#X connect 3 1 0 0;
#X connect 4 0 2 0;
#X connect 4 1 0 0;
#X connect 5 0 3 0;
#X restore 11 185 pd counter;
#N canvas 483 421 180 198 counter 0;
#X obj 42 81 s \$0.counter.in;
#X obj 42 101 r \$0.counter.out;
#X obj 15 122 f;
#X obj 15 40 route bang;
#X obj 15 62 t b b;
#X obj 15 13 inlet;
#X obj 15 145 outlet;
#X connect 1 0 2 1;
#X connect 2 0 6 0;
#X connect 3 0 4 0;
#X connect 3 1 0 0;
#X connect 4 0 2 0;
#X connect 4 1 0 0;
#X connect 5 0 3 0;
#X restore 30 282 pd counter;
#X obj 30 305 tabread \$0.unpack;
#X obj 11 237 t b a b;
#X msg 91 345 set;
#X msg 30 345 add2 \$1;
#X msg 11 400;
#X obj 11 422 t b a;
#X obj 11 450 s \$0.next;
#X obj 64 155 r \$0.next;
#X connect 0 0 6 0;
#X connect 1 0 3 0;
#X connect 5 0 3 0;
#X connect 6 0 7 0;
#X connect 6 1 1 0;
#X connect 6 2 5 0;
#X connect 7 0 15 0;
#X connect 8 0 19 0;
#X connect 9 0 17 0;
#X connect 10 0 12 0;
#X connect 11 0 13 0;
#X connect 11 0 14 0;
#X connect 12 0 11 0;
#X connect 12 1 11 1;
#X connect 13 0 11 1;
#X connect 15 0 16 0;
#X connect 15 1 16 0;
#X connect 16 0 8 0;
#X connect 17 0 18 0;
#X connect 18 0 21 0;
#X connect 19 0 22 0;
#X connect 19 1 9 0;
#X connect 19 2 20 0;
#X connect 20 0 22 0;
#X connect 21 0 22 0;
#X connect 22 0 23 0;
#X connect 23 0 24 0;
#X connect 23 1 2 0;
#X connect 25 0 16 0;
#X restore 14 322 pd unpack.delta;
#X obj 29 423 s \$1-\$2;
#X obj 61 396 s \$0.compare;
#X obj 14 298 route list;
#X msg 14 448 1;
#X msg 45 448 0;
#X obj 14 475 s \$0.loopbreak;
#X obj 235 220 t a a;
#X obj 262 243 s \$0.compare;
#X obj 15 209 s \$0.send;
#X obj 125 162 s \$0.compare;
#X obj 55 162 route done;
#X obj 15 162 t a a;
#N canvas 544 324 260 485 generate.delta 0;
#X obj 59 172 tabread \$1-\$2;
#X obj 40 215 tabread \$0.compare;
#X obj 40 125 f;
#X obj 74 125 + 1;
#X obj 40 240 -;
#X obj 40 262 sel 0;
#X obj 59 194 t a a;
#X obj 40 152 t a a a;
#X obj 40 306 f;
#X obj 40 285 b;
#X obj 21 25 inlet;
#X obj 21 430 outlet;
#X obj 40 328 list prepend;
#X msg 21 403 done;
#X obj 21 47 t b a a;
#X msg 40 78 \$2;
#X msg 88 99 \$1;
#X obj 40 100 until;
#X connect 0 0 6 0;
#X connect 1 0 4 0;
#X connect 2 0 3 0;
#X connect 2 0 7 0;
#X connect 3 0 2 1;
#X connect 4 0 5 0;
#X connect 5 1 9 0;
#X connect 6 0 4 1;
#X connect 6 1 8 1;
#X connect 7 0 1 0;
#X connect 7 1 0 0;
#X connect 7 2 12 1;
#X connect 8 0 12 0;
#X connect 9 0 8 0;
#X connect 10 0 14 0;
#X connect 12 0 11 0;
#X connect 13 0 11 0;
#X connect 14 0 13 0;
#X connect 14 1 15 0;
#X connect 14 2 16 0;
#X connect 15 0 17 0;
#X connect 16 0 2 1;
#X connect 17 0 2 0;
#X restore 15 89 pd generate.delta;
#N canvas 541 420 450 300 compress.delta 0;
#X obj 26 18 inlet;
#X obj 83 251 outlet;
#X obj 83 102 route 0;
#X obj 83 124 t a b;
#X obj 235 91 f;
#X obj 235 115 + 1;
#X msg 83 198 add2 \$1;
#X obj 235 140 t a;
#X msg 122 169 \$2;
#X msg 141 147 \$1;
#X obj 122 125 t a a b;
#X msg 161 187 bang \, set;
#X obj 177 36 loadbang;
#X msg 177 58 -12.3457;
#X msg 83 220;
#X obj 26 47 route done;
#X obj 26 69 t b b;
#X msg 26 177 done;
#X connect 0 0 15 0;
#X connect 2 0 3 0;
#X connect 2 1 10 0;
#X connect 3 0 6 0;
#X connect 3 1 4 0;
#X connect 4 0 5 0;
#X connect 5 0 7 0;
#X connect 6 0 14 0;
#X connect 7 0 4 1;
#X connect 7 0 2 1;
#X connect 8 0 6 0;
#X connect 9 0 6 0;
#X connect 9 0 5 0;
#X connect 10 0 8 0;
#X connect 10 1 9 0;
#X connect 10 2 11 0;
#X connect 11 0 14 0;
#X connect 12 0 13 0;
#X connect 13 0 7 0;
#X connect 14 0 1 0;
#X connect 15 0 16 0;
#X connect 15 1 2 0;
#X connect 16 0 17 0;
#X connect 16 1 11 0;
#X connect 16 1 13 0;
#X connect 17 0 1 0;
#X restore 15 140 pd compress.delta;
#N canvas 508 241 301 250 pack.delta 0;
#X obj 13 18 inlet;
#X obj 13 180 outlet;
#X obj 79 136 list prepend add2;
#X msg 13 152;
#X msg 13 66 bang \, set;
#X obj 79 158 list trim;
#X obj 13 43 route done;
#X obj 79 66 t a a;
#X obj 106 89 list length;
#X msg 106 112 add2 \$1;
#X connect 0 0 6 0;
#X connect 2 0 5 0;
#X connect 3 0 1 0;
#X connect 4 0 3 0;
#X connect 5 0 3 0;
#X connect 6 0 4 0;
#X connect 6 1 7 0;
#X connect 7 0 2 0;
#X connect 7 1 8 0;
#X connect 8 0 9 0;
#X connect 9 0 3 0;
#X restore 15 185 pd pack.delta;
#X obj 233 93 spigot 1;
#X obj 278 71 r \$0.loopbreak;
#X text 671 26 -- communication --;
#X text 232 341 -- reference table --;
#X text 12 255 -- receive array commands --;
#X text 231 24 -- array commands --;
#X obj 233 148 route read write print;
#X text 246 118 filter some commands;
#X text 246 130 that we don't want to support;
#X obj 443 44 loadbang;
#X obj 443 66 f \$3;
#X obj 443 294 min 1024;
#X obj 443 374 s \$0.size;
#X obj 235 176 t a a;
#X obj 443 184 route resize sinesum cosinesum;
#X msg 443 232 \$1;
#N canvas 495 251 409 488 init.reference.table 0;
#X obj 7 2 r \$0.size;
#X obj 7 24 spigot 1;
#X msg 80 36 0;
#X obj 34 138 until;
#X obj 34 160 f;
#X obj 77 159 + 1;
#X obj 7 68 del 0;
#X obj 7 90 f;
#X obj 34 209 tabread \$1-\$2;
#X obj 34 186 t a a;
#X obj 34 236 tabwrite \$0.compare;
#X obj 7 113 t b a;
#X obj 7 262 s \$0.start.auto.sync;
#X obj 178 130 s \$1-\$2;
#X msg 159 158 1;
#X msg 198 158 0;
#X obj 159 185 s \$0.loopbreak;
#X obj 159 84 t b a b;
#X msg 178 107 resize \$1;
#X obj 7 46 t b a b a;
#X connect 0 0 1 0;
#X connect 1 0 19 0;
#X connect 2 0 1 1;
#X connect 2 0 4 1;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 4 0 9 0;
#X connect 5 0 4 1;
#X connect 6 0 7 0;
#X connect 7 0 11 0;
#X connect 8 0 10 0;
#X connect 9 0 8 0;
#X connect 9 1 10 1;
#X connect 11 0 12 0;
#X connect 11 1 3 0;
#X connect 14 0 16 0;
#X connect 15 0 16 0;
#X connect 17 0 14 0;
#X connect 17 1 18 0;
#X connect 17 2 15 0;
#X connect 18 0 13 0;
#X connect 19 0 6 0;
#X connect 19 1 7 1;
#X connect 19 2 2 0;
#X connect 19 3 17 0;
#X restore 222 461 pd init.reference.table;
#N canvas 260 225 218 367 dump.total 0;
#X obj 57 253 tabread \$1-\$2;
#X obj 30 181 until;
#X msg 86 180 0;
#X obj 30 204 f;
#X obj 64 204 + 1;
#X obj 31 334 outlet;
#X obj 11 98 t b b b;
#X msg 11 304 done;
#X obj 78 94 r \$0.size;
#X obj 30 119 f;
#X obj 30 231 t a a;
#X obj 30 277 list append;
#X msg 125 170 resize \$1;
#X obj 125 192 s \$0.send;
#X obj 30 141 t a a;
#X obj 11 25 netpd-dump \$1;
#X connect 0 0 11 1;
#X connect 1 0 3 0;
#X connect 2 0 3 1;
#X connect 3 0 4 0;
#X connect 3 0 10 0;
#X connect 4 0 3 1;
#X connect 6 0 7 0;
#X connect 6 1 9 0;
#X connect 6 2 2 0;
#X connect 7 0 5 0;
#X connect 8 0 9 1;
#X connect 9 0 14 0;
#X connect 10 0 11 0;
#X connect 10 1 0 0;
#X connect 11 0 5 0;
#X connect 12 0 13 0;
#X connect 14 0 1 0;
#X connect 14 1 12 0;
#X connect 15 0 6 0;
#X restore 49 111 pd dump.total;
#X obj 262 197 s \$0.adjust.size;
#X obj 77 370 s \$0.adjust.size;
#X obj 14 344 t b a b a a;
#X obj 443 162 r \$0.adjust.size;
#X msg 502 211 \$1;
#X obj 502 233 + 3;
#X text 442 21 -- set internal size --;
#X text 235 436 -- init ref table --;
#X obj 510 296 > 1024;
#X obj 510 318 sel 1;
#X obj 510 340 f 1024;
#X obj 443 273 t a a;
#X obj 510 362 list prepend \$1 \$2;
#X obj 510 409 netpd-error netpd_t;
#X msg 510 386 \$1-\$2: indices above \$3 (MAXSIZE) are not synced
;
#X obj 676 304 loadbang;
#X obj 676 326 f \$0;
#X obj 560 261 r \$0.maxsize;
#X text 674 280 -- maxsize --;
#X obj 443 113 s \$0.adjust.size;
#X msg 443 89 resize \$1;
#X msg 676 348 \; \$1.maxsize 2048;
#X obj 507 465 inlet;
#X obj 618 464 inlet;
#X obj 507 491 tabwrite \$0.compare;
#X text 10 26 -- auto table sync --;
#N canvas 1005 172 333 509 change.detection 0;
#X obj 20 304 timer;
#X obj 48 179 -~;
#X obj 49 260 sel 0;
#X obj 76 282 b;
#X obj 20 100 t b b;
#X obj 49 230 t a b;
#X obj 107 261 s \$0.trigger;
#X obj 20 20 r \$0.trigger;
#X obj 20 42 f;
#X obj 79 49 + 1;
#X obj 20 70 sel 0;
#X obj 63 340 samplerate~;
#X obj 20 369 *;
#X obj 63 363 / 1000;
#X obj 63 317 loadbang;
#X obj 49 208 env~ 128 128;
#X obj 79 71 mod 35;
#X text 131 54 <- check interval: 101ms;
#X obj 20 392 - 128;
#X msg 20 435 \$1 128;
#X text 72 435 <- which part has changed: <start> <length>;
#X obj 20 457 outlet;
#X obj 47 134 tabplay~ \$1-\$2;
#X obj 63 156 tabplay~ \$0.compare;
#X obj 20 415 int;
#X connect 0 0 12 0;
#X connect 1 0 15 0;
#X connect 2 1 3 0;
#X connect 3 0 0 1;
#X connect 4 0 0 0;
#X connect 4 1 22 0;
#X connect 4 1 23 0;
#X connect 5 0 2 0;
#X connect 5 1 6 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 8 0 10 0;
#X connect 9 0 16 0;
#X connect 10 0 4 0;
#X connect 11 0 13 0;
#X connect 12 0 18 0;
#X connect 13 0 12 1;
#X connect 14 0 11 0;
#X connect 15 0 5 0;
#X connect 16 0 8 1;
#X connect 18 0 24 0;
#X connect 19 0 21 0;
#X connect 22 0 1 0;
#X connect 23 0 1 1;
#X connect 24 0 19 0;
#X restore 15 55 pd change.detection;
#X obj 673 168 r \$1.NETPD;
#X obj 673 192 route receive;
#X connect 1 0 6 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 0 0;
#X connect 5 0 2 0;
#X connect 8 0 27 0;
#X connect 10 0 14 0;
#X connect 11 0 47 0;
#X connect 14 0 11 0;
#X connect 14 1 47 0;
#X connect 15 0 17 0;
#X connect 16 0 17 0;
#X connect 18 0 9 0;
#X connect 18 1 19 0;
#X connect 22 1 21 0;
#X connect 23 0 26 0;
#X connect 23 1 22 0;
#X connect 24 0 25 0;
#X connect 25 0 23 0;
#X connect 26 0 20 0;
#X connect 27 0 33 0;
#X connect 28 0 27 1;
#X connect 33 3 40 0;
#X connect 36 0 37 0;
#X connect 37 0 65 0;
#X connect 38 0 39 0;
#X connect 40 0 18 0;
#X connect 40 1 45 0;
#X connect 41 0 42 0;
#X connect 41 1 49 0;
#X connect 41 2 49 0;
#X connect 42 0 56 0;
#X connect 44 0 25 0;
#X connect 47 0 15 0;
#X connect 47 1 12 0;
#X connect 47 2 16 0;
#X connect 47 3 13 0;
#X connect 47 4 46 0;
#X connect 48 0 41 0;
#X connect 49 0 50 0;
#X connect 50 0 56 0;
#X connect 53 0 54 0;
#X connect 54 0 55 0;
#X connect 55 0 57 0;
#X connect 56 0 38 0;
#X connect 56 1 53 0;
#X connect 57 0 59 0;
#X connect 59 0 58 0;
#X connect 60 0 61 0;
#X connect 61 0 66 0;
#X connect 62 0 38 1;
#X connect 62 0 55 1;
#X connect 62 0 53 1;
#X connect 65 0 64 0;
#X connect 67 0 69 0;
#X connect 68 0 69 1;
#X connect 71 0 24 0;
#X connect 72 0 73 0;
#X connect 73 0 1 0;
