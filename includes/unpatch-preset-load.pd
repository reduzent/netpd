#N canvas 310 106 552 577 10;
#X obj 18 123 openpanel;
#X obj 41 520 s NETPD;
#X obj 18 75 sel 0;
#X obj 18 52 r \$0.button.s;
#X obj 23 20 hsl 35 20 0 127 0 0 \$0.button.s empty empty -2 8 0 10
#fcfcfc #000000 #000000 0 1;
#X obj 18 98 spigot 1;
#X obj 316 14 loadbang;
#X obj 316 36 \$0;
#X obj 20 20 cnv 15 40 20 empty \$0.button.r load 3 12 0 14 #f0f0f0
#404040 0;
#N canvas 577 264 371 356 set.colors 0;
#X obj 23 273 s \$0.button.r;
#X obj 212 253 netpd-rgb2iem;
#X obj 23 128 t b a;
#X obj 212 228 r \$0.to.iem;
#X obj 212 276 s \$0.from.iem;
#X obj 67 129 s \$0.to.iem;
#X obj 53 151 r \$0.from.iem;
#X obj 23 150 f;
#X obj 166 158 t b a;
#X obj 210 159 s \$0.to.iem;
#X obj 196 181 r \$0.from.iem;
#X obj 166 180 f;
#X obj 23 45 loadbang;
#X msg 23 248 color \$1 \$1 \$2;
#X msg 23 102 240 240 240;
#X msg 139 95 184 184 184;
#X msg 166 134 64 64 64;
#X obj 23 225 pack f f;
#X obj 23 68 t b b;
#X obj 120 35 r \$0.loading;
#X obj 120 58 sel 0 1;
#X connect 1 0 4 0;
#X connect 2 0 7 0;
#X connect 2 1 5 0;
#X connect 3 0 1 0;
#X connect 6 0 7 1;
#X connect 7 0 17 0;
#X connect 8 0 11 0;
#X connect 8 1 9 0;
#X connect 10 0 11 1;
#X connect 11 0 17 1;
#X connect 12 0 18 0;
#X connect 13 0 0 0;
#X connect 14 0 2 0;
#X connect 15 0 2 0;
#X connect 16 0 8 0;
#X connect 17 0 13 0;
#X connect 18 0 14 0;
#X connect 18 1 16 0;
#X connect 19 0 20 0;
#X connect 20 0 14 0;
#X connect 20 1 15 0;
#X restore 338 192 pd set.colors;
#X obj 41 469 t a b;
#X obj 62 75 t a;
#X obj 95 81 r \$0.loading;
#X obj 95 104 == 0;
#N canvas 753 234 477 595 check_format_version 0;
#X obj 26 12 inlet;
#X obj 45 221 routeOSC /netpd/preset/format;
#X msg 45 269 \$1 \$2 0;
#X obj 168 246 r \$0.preset.format;
#X msg 168 268 \$1 \$2 0;
#X obj 45 295 netpd-version-compare;
#X obj 43 465 netpd-error unpatch;
#X obj 43 398 b;
#X obj 43 419 list append;
#X msg 43 442 preset format version not supported: \$1 \$2;
#X msg 45 91 40;
#X obj 26 500 symbol, f 23;
#X obj 26 546 outlet;
#X obj 45 198 unpackOSC;
#N canvas 914 112 450 300 slipdec 0;
#X obj 15 15 inlet;
#X obj 15 255 outlet;
#X obj 15 188 slipdec 65536;
#X text 81 229 we need to make sure to clear [slipdec]'s buffer if
we received non-slip data before proceeding. Otherwise garbage is sent
to [unpackOSC];
#X obj 15 213 spigot 1;
#X obj 90 81 t b b b;
#X msg 129 102 0;
#X msg 90 151 1;
#X msg 109 123 192;
#X obj 90 42 inlet;
#X connect 0 0 2 0;
#X connect 2 0 4 0;
#X connect 4 0 1 0;
#X connect 5 0 7 0;
#X connect 5 1 8 0;
#X connect 5 2 6 0;
#X connect 6 0 4 1;
#X connect 7 0 4 1;
#X connect 8 0 2 0;
#X connect 9 0 5 0;
#X restore 45 174 pd slipdec;
#X f 13;
#X obj 26 343 f, f 19;
#X obj 26 368 sel 0 -1 1 2;
#X obj 45 62 t b a b b a, f 25;
#X msg 136 320 2;
#X obj 203 504 symbol;
#X obj 203 553 outlet;
#X obj 193 415 t a a;
#X text 252 538 no version detected;
#X text 254 555 try old text-based format;
#X text 76 543 version matches;
#X text 75 559 continue loading;
#X obj 45 244 t a a;
#X obj 26 35 t b a;
#X obj 45 148 file handle;
#X msg 84 119 open \$1 r \, seek 0;
#X connect 0 0 27 0;
#X connect 1 0 26 0;
#X connect 2 0 5 0;
#X connect 3 0 4 0;
#X connect 4 0 5 1;
#X connect 5 0 15 1;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 9 0 6 0;
#X connect 10 0 28 0;
#X connect 11 0 12 0;
#X connect 13 0 1 0;
#X connect 14 0 13 0;
#X connect 15 0 16 0;
#X connect 16 0 11 0;
#X connect 16 1 7 0;
#X connect 16 2 7 0;
#X connect 16 3 19 0;
#X connect 17 0 10 0;
#X connect 17 1 29 0;
#X connect 17 2 14 1;
#X connect 17 3 18 0;
#X connect 17 4 21 0;
#X connect 18 0 15 1;
#X connect 19 0 20 0;
#X connect 21 0 11 1;
#X connect 21 1 19 1;
#X connect 26 0 2 0;
#X connect 26 1 8 1;
#X connect 27 0 15 0;
#X connect 27 1 17 0;
#X connect 28 0 14 0;
#X connect 29 0 28 0;
#X restore 18 155 pd check_format_version;
#X msg 316 58 \; \$1.preset.format 2 0;
#X text 25 175 match;
#X text 161 172 try text-based;
#X obj 318 145 text define \$0.preset;
#N canvas 519 407 380 401 check_old_format 0;
#X obj 12 14 inlet;
#X obj 52 84 s \$0.txt.in;
#X obj 12 125 text get \$0.preset;
#X msg 12 100 0;
#X obj 12 148 list trim;
#X obj 12 171 route /unpatch/netload;
#X msg 141 194 not a valid preset file;
#X obj 141 216 netpd-error unpatch;
#X obj 39 258 print UNPATCH;
#X msg 39 237 old preset format detected;
#X obj 12 194 t b b;
#X obj 12 37 t b a a, f 14;
#X obj 12 299 symbol, f 14;
#X obj 12 322 outlet;
#X msg 52 62 read -c \$1;
#X connect 0 0 11 0;
#X connect 2 0 4 0;
#X connect 3 0 2 0;
#X connect 4 0 5 0;
#X connect 5 0 10 0;
#X connect 5 1 6 0;
#X connect 6 0 7 0;
#X connect 9 0 8 0;
#X connect 10 0 12 0;
#X connect 10 1 9 0;
#X connect 11 0 3 0;
#X connect 11 1 14 0;
#X connect 11 2 12 1;
#X connect 12 0 13 0;
#X connect 14 0 1 0;
#X restore 153 199 pd check_old_format;
#X obj 318 121 r \$0.txt.in;
#N canvas 0 106 403 355 read.preset 0;
#X obj 19 9 inlet;
#X obj 19 55 until;
#X obj 19 178 unpackOSC;
#N canvas 914 112 450 300 slipdec 0;
#X obj 15 15 inlet;
#X obj 15 255 outlet;
#X obj 15 188 slipdec 65536;
#X text 81 229 we need to make sure to clear [slipdec]'s buffer if
we received non-slip data before proceeding. Otherwise garbage is sent
to [unpackOSC];
#X obj 15 213 spigot 1;
#X obj 90 81 t b b b;
#X msg 129 102 0;
#X msg 90 151 1;
#X msg 109 123 192;
#X obj 90 42 inlet;
#X connect 0 0 2 0;
#X connect 2 0 4 0;
#X connect 4 0 1 0;
#X connect 5 0 7 0;
#X connect 5 1 8 0;
#X connect 5 2 6 0;
#X connect 6 0 4 1;
#X connect 7 0 4 1;
#X connect 8 0 2 0;
#X connect 9 0 5 0;
#X restore 19 154 pd slipdec;
#X f 14;
#X obj 19 34 t b a b, f 14;
#X obj 19 268 outlet;
#X obj 19 237 spigot 0;
#X obj 19 201 t b a;
#X msg 70 207 1;
#X msg 123 205 0;
#X text 79 236 skip the first message (format header);
#X obj 19 108 file handle;
#X msg 59 55 open \$1 r \, seek 0;
#X obj 82 132 route bang;
#X msg 19 80 1024;
#X connect 0 0 4 0;
#X connect 1 0 14 0;
#X connect 2 0 7 0;
#X connect 3 0 2 0;
#X connect 4 0 1 0;
#X connect 4 1 12 0;
#X connect 4 2 3 1;
#X connect 4 2 9 0;
#X connect 6 0 5 0;
#X connect 7 0 8 0;
#X connect 7 1 6 0;
#X connect 8 0 6 1;
#X connect 9 0 6 1;
#X connect 11 0 3 0;
#X connect 11 1 13 0;
#X connect 12 0 11 0;
#X connect 13 0 1 1;
#X connect 14 0 11 0;
#X restore 37 307 pd read.preset;
#N canvas 672 360 404 263 read.preset.old 0;
#X obj 14 61 text size \$0.preset;
#X obj 14 13 inlet;
#X obj 14 36 t b;
#X obj 14 84 t a b, f 7;
#X obj 14 107 until;
#X obj 14 130 f;
#X obj 14 153 t a a;
#X obj 61 141 + 1;
#X msg 53 108 0;
#X obj 14 177 text get \$0.preset;
#X obj 14 200 list trim;
#X obj 14 223 outlet;
#X connect 0 0 3 0;
#X connect 1 0 2 0;
#X connect 2 0 0 0;
#X connect 3 0 4 0;
#X connect 3 1 8 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 9 0;
#X connect 6 1 7 0;
#X connect 7 0 5 1;
#X connect 8 0 5 1;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X restore 172 306 pd read.preset.old;
#X obj 257 52 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000;
#X obj 153 237 t b a b;
#X text 158 219 looks like old format;
#X obj 192 260 s \$0.preamble;
#X obj 153 283 s \$0.postamble;
#X obj 18 234 t b a b;
#X obj 57 257 s \$0.preamble;
#X obj 18 280 s \$0.postamble;
#X obj 228 400 r \$0.preamble;
#X obj 37 331 s \$0.broadcast;
#X obj 172 330 s \$0.broadcast;
#X obj 228 448 s \$0.broadcast;
#X obj 41 367 r \$0.broadcast;
#X obj 41 420 list prepend to;
#X obj 41 444 list trim;
#X msg 228 424 /unpatch/preset/load/start \, /unpatch/netcloseall;
#X obj 229 524 s \$0.broadcast;
#X obj 229 476 r \$0.postamble;
#X msg 229 500 /unpatch/preset/load/end;
#N canvas 746 229 474 409 parse.start.end 0;
#X obj 75 43 netpd-r /unpatch/preset/load/start;
#X obj 34 23 netpd-r /unpatch/preset/load/end;
#X obj 34 49 b;
#X msg 75 91 1;
#X msg 34 92 0;
#X obj 53 187 s \$0.loading;
#X obj 79 214 netpd-pref-get pd-dynamic-dsp-off 1;
#X obj 34 241 spigot 1;
#X obj 75 66 t b b, f 13;
#X obj 150 263 netpd-status-get dsp;
#X obj 62 299 f;
#X obj 34 264 sel 1 0, f 10;
#X msg 34 298 0;
#X msg 34 328 dsp \$1;
#X obj 34 351 s pd;
#X obj 34 119 t a a a;
#X msg 73 142 preset_loading \$1;
#X obj 73 165 s \$1.UNPATCH;
#X connect 0 0 8 0;
#X connect 1 0 2 0;
#X connect 2 0 4 0;
#X connect 3 0 15 0;
#X connect 4 0 15 0;
#X connect 6 0 7 1;
#X connect 7 0 11 0;
#X connect 8 0 3 0;
#X connect 8 1 9 0;
#X connect 9 0 10 1;
#X connect 10 0 13 0;
#X connect 11 0 12 0;
#X connect 11 1 10 0;
#X connect 12 0 13 0;
#X connect 13 0 14 0;
#X connect 15 0 7 0;
#X connect 15 1 5 0;
#X connect 15 2 16 0;
#X connect 16 0 17 0;
#X restore 339 222 pd parse.start.end;
#X obj 41 394 netpd-funnel;
#X msg 68 493 receiver b;
#X connect 0 0 14 0;
#X connect 2 0 5 0;
#X connect 2 1 11 0;
#X connect 3 0 2 0;
#X connect 5 0 0 0;
#X connect 6 0 7 0;
#X connect 7 0 15 0;
#X connect 10 0 1 0;
#X connect 10 1 44 0;
#X connect 11 0 2 1;
#X connect 12 0 13 0;
#X connect 13 0 5 1;
#X connect 14 0 28 0;
#X connect 14 1 19 0;
#X connect 19 0 24 0;
#X connect 20 0 18 0;
#X connect 21 0 32 0;
#X connect 22 0 33 0;
#X connect 23 0 7 0;
#X connect 24 0 27 0;
#X connect 24 1 22 0;
#X connect 24 2 26 0;
#X connect 28 0 30 0;
#X connect 28 1 21 0;
#X connect 28 2 29 0;
#X connect 31 0 38 0;
#X connect 35 0 43 0;
#X connect 36 0 37 0;
#X connect 37 0 10 0;
#X connect 38 0 34 0;
#X connect 40 0 41 0;
#X connect 41 0 39 0;
#X connect 43 0 36 0;
#X connect 44 0 1 0;
#X coords 0 -1 1 1 40 20 2 20 20;
