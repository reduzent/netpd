#N canvas 589 44 274 347 10;
#X declare -path abs;
#N canvas 363 44 226 320 unpatch 1;
#X obj 5 7 cnv 5 207 297 empty empty empty 20 12 0 14 -1 -66577 0;
#X obj 6 64 cnv 12 205 13 empty \$0.gui.bg1 empty 5 6 1 9 -199731 -1
0;
#X obj 6 22 cnv 12 205 13 empty \$0.gui.bg2 empty 5 6 1 10 -224635
-1 0;
#X obj 6 234 cnv 12 205 13 empty \$0.gui.bg1 empty 5 6 1 9 -199731
-1 0;
#X obj 6 78 cnv 12 205 13 empty \$0.gui.bg2 close/code/visualize 2
8 1 10 -224635 -1 0;
#X obj 6 107 unpatch-gui-row \$0 1;
#X obj 202 92 netpd-scrollbar \$0.scrollbar 10 141 10;
#X obj 6 93 unpatch-gui-row \$0 0;
#X obj 6 121 unpatch-gui-row \$0 2;
#X obj 6 135 unpatch-gui-row \$0 3;
#X obj 6 149 unpatch-gui-row \$0 4;
#X obj 6 163 unpatch-gui-row \$0 5;
#X obj 6 177 unpatch-gui-row \$0 6;
#X obj 6 191 unpatch-gui-row \$0 7;
#X obj 6 205 unpatch-gui-row \$0 8;
#X obj 6 219 unpatch-gui-row \$0 9;
#X obj 6 248 unpatch-status-display \$0.upload.status upload;
#X obj 6 276 unpatch-status-display \$0.download.status download;
#X obj 5 36 unpatch-netload-gui \$0 \$0.netload;
#X obj 6 8 unpatch-gui-title;
#X restore 17 82 pd unpatch;
#N canvas 625 53 532 660 unpatch_download 0;
#X obj 9 65 r \$0.receive;
#X obj 9 290 list trim;
#X msg 79 418 msg patch load \$1 \$2;
#X obj 9 612 s \$0.UNPATCH;
#X text 18 580 finally load patch \, if all dependencies;
#X text 17 593 are fulfilled;
#X text 13 10 Check if we're missing some dependencies of patch being
netloaded. Check for existence of given abstractions and versions of
abstractions and the patch.;
#X obj 9 228 route slot;
#X obj 9 268 list append 0;
#X obj 9 186 t a a;
#X obj 79 187 t a a;
#X obj 233 237 spigot;
#X obj 233 259 print DEBUG/DOWNLOAD;
#X obj 266 217 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 9 496 unpatch-batch-download /unpatch \$0.UNPATCH;
#X text 227 426 pass the the batch download in order to;
#X obj 226 371 t a a;
#X text 227 415 let also the close message;
#X text 250 460 keep the order of load and close msgs;
#X text 249 472 consistent.;
#X obj 279 612 netpd-error unpatch;
#X obj 279 493 route bang status;
#X msg 279 590 no peer found to download patches from;
#X obj 328 519 list prepend statusmsg;
#X obj 328 541 list trim;
#X obj 328 563 s \$0.UNPATCH;
#X msg 226 393 msg patch close \$1 \$2;
#X obj 9 164 routeOSC /check /netload;
#X obj 150 235 t a a;
#X msg 150 396 msg synced;
#X text 15 311 <type> <name> <ver> <ver> <ver> <slot>;
#N canvas 888 310 306 303 unpatch.tell 0;
#X obj 22 18 inlet;
#X obj 22 40 t a a a;
#X obj 41 65 outlet;
#X obj 154 104 route patch;
#X obj 154 126 route close load;
#X msg 154 172 closing \$1 \$2;
#X msg 200 149 loading \$1 \$2;
#X obj 22 259 s UNPATCH;
#X obj 22 107 route patch;
#X obj 22 129 route close load;
#X msg 22 175 closed \$1 \$2;
#X msg 68 152 loaded \$1 \$2;
#X connect 0 0 1 0;
#X connect 1 0 8 0;
#X connect 1 1 2 0;
#X connect 1 2 3 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 4 1 6 0;
#X connect 5 0 7 0;
#X connect 6 0 7 0;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 9 1 11 0;
#X connect 10 0 7 0;
#X connect 11 0 7 0;
#X restore 9 530 pd unpatch.tell;
#X obj 9 88 spigot 1;
#X obj 116 62 r \$0.UNPATCH;
#X obj 116 84 route protect;
#X obj 116 106 == 0;
#X obj 28 117 r \$0.local;
#X obj 150 185 routeOSC /synced /netclose;
#X obj 28 139 route b;
#X connect 0 0 32 0;
#X connect 1 0 14 0;
#X connect 2 0 14 0;
#X connect 7 0 8 1;
#X connect 7 1 8 0;
#X connect 8 0 1 0;
#X connect 9 0 7 0;
#X connect 9 1 11 0;
#X connect 10 0 2 0;
#X connect 10 1 11 0;
#X connect 11 0 12 0;
#X connect 13 0 11 1;
#X connect 14 0 31 0;
#X connect 14 1 21 0;
#X connect 16 0 26 0;
#X connect 16 1 11 0;
#X connect 21 0 22 0;
#X connect 21 1 23 0;
#X connect 22 0 20 0;
#X connect 23 0 24 0;
#X connect 24 0 25 0;
#X connect 26 0 14 0;
#X connect 27 0 9 0;
#X connect 27 1 10 0;
#X connect 27 2 37 0;
#X connect 28 0 29 0;
#X connect 28 1 11 0;
#X connect 29 0 14 0;
#X connect 31 0 3 0;
#X connect 32 0 27 0;
#X connect 33 0 34 0;
#X connect 34 0 35 0;
#X connect 35 0 32 1;
#X connect 36 0 38 0;
#X connect 37 0 28 0;
#X connect 37 1 16 0;
#X connect 38 0 27 0;
#X restore 17 131 pd unpatch_download;
#X text 14 10 UNPATCH www.netpd.org;
#X text 15 24 Author: Roman Haefeli <roman@netpd.org>;
#N canvas 617 53 696 360 unpatch_patch_manager 0;
#X obj 14 75 netpd-hash;
#X obj 14 10 r \$0.UNPATCH;
#X obj 14 142 s \$0.UNPATCH;
#X obj 14 96 list prepend patchlist out;
#X obj 14 118 list trim;
#X obj 222 151 pack f s;
#X floatatom 222 132 5 0 0 0 - - -;
#X symbolatom 263 132 10 0 0 0 - - -;
#X obj 14 32 route patchlist;
#X obj 14 54 route in;
#X msg 193 100 1 eins \, 2 zwei \, 3 drei \, 4 vier \, 5 fuenf \, 6
sechs \, 7 sieben \, 8 acht \, 9 neun \, 10 zehn \, 11 elf \, 12 zwoelf
;
#N canvas 778 147 198 360 sync.length 0;
#X msg 41 103 patchlist in getlength;
#X obj 14 82 t b b;
#X obj 41 125 s \$0.UNPATCH;
#X obj 41 147 r \$0.UNPATCH;
#X obj 41 169 route patchlist;
#X obj 41 191 route out;
#X obj 41 275 s \$0.scrollbar;
#X obj 14 211 list;
#X msg 41 254 set totallength \$1;
#X obj 14 233 t a a;
#X obj 14 16 r \$0.UNPATCH;
#X obj 14 38 route patchlist;
#X obj 14 60 route synclength;
#X msg 14 299 patchlist length \$1;
#X obj 14 321 s \$0.UNPATCH;
#X connect 0 0 2 0;
#X connect 1 0 7 0;
#X connect 1 1 0 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 7 1;
#X connect 7 0 9 0;
#X connect 8 0 6 0;
#X connect 9 0 13 0;
#X connect 9 1 8 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 1 0;
#X connect 13 0 14 0;
#X restore 15 215 pd sync.length;
#X obj 193 213 s \$0.UNPATCH;
#N canvas 217 53 332 469 add.patch 0;
#X obj 42 137 s \$0.UNPATCH;
#X msg 42 117 patchlist in append \$1 \$2;
#X obj 15 94 t b a;
#X obj 15 158 t b b;
#X obj 42 201 s \$0.UNPATCH;
#X obj 42 223 r \$0.UNPATCH;
#X obj 42 245 route patchlist;
#X obj 15 375 s \$0.scrollbar;
#X obj 15 287 list;
#X obj 15 308 - 10;
#X msg 15 352 set pos \$1;
#X obj 15 329 max 0;
#X msg 42 179 patchlist synclength;
#X obj 42 267 route length;
#X obj 15 7 r \$0.UNPATCH;
#X obj 15 73 list;
#X obj 15 29 route patch;
#X obj 15 51 route load;
#X connect 1 0 0 0;
#X connect 2 0 3 0;
#X connect 2 1 1 0;
#X connect 3 0 8 0;
#X connect 3 1 12 0;
#X connect 5 0 6 0;
#X connect 6 0 13 0;
#X connect 8 0 9 0;
#X connect 9 0 11 0;
#X connect 10 0 7 0;
#X connect 11 0 10 0;
#X connect 12 0 4 0;
#X connect 13 0 8 1;
#X connect 14 0 16 0;
#X connect 15 0 2 0;
#X connect 16 0 17 0;
#X connect 17 0 15 0;
#X restore 15 172 pd add.patch;
#N canvas 847 268 246 395 scroll.logic 0;
#X obj 34 124 s \$0.UNPATCH;
#X msg 34 104 patchlist in getrange \$1 10;
#X obj 34 147 r \$0.UNPATCH;
#X obj 34 191 route patchlist;
#X obj 34 213 route out;
#X obj 34 169 spigot;
#X msg 51 79 1;
#X msg 17 81 0;
#X obj 34 261 t a b;
#X obj 61 284 f;
#X obj 105 285 + 1;
#X obj 34 313 list prepend;
#X obj 17 55 t b a b b;
#X msg 132 254 0;
#X obj 34 357 s \$0.UNPATCH;
#X obj 17 11 r \$0.scrollbar;
#X obj 17 33 route pos;
#N canvas 719 128 172 344 nice.labels 0;
#X obj 28 207 makefilename %c;
#X obj 11 230 list append;
#X obj 28 163 loadbang;
#X msg 28 185 32;
#X obj 11 31 unpack f s;
#X obj 11 252 list append;
#X msg 11 274 symbol \$1\$2\$3;
#X obj 68 54 sel empty;
#X msg 68 106 symbol empty;
#X obj 11 107 spigot;
#X msg 44 83 0;
#X msg 82 80 1;
#X obj 11 9 inlet;
#X obj 11 296 outlet;
#X obj 11 136 makefilename %3d;
#X connect 0 0 1 1;
#X connect 1 0 5 0;
#X connect 2 0 3 0;
#X connect 3 0 0 0;
#X connect 4 0 9 0;
#X connect 4 1 7 0;
#X connect 5 0 6 0;
#X connect 6 0 13 0;
#X connect 7 0 8 0;
#X connect 7 0 10 0;
#X connect 7 1 11 0;
#X connect 7 1 5 1;
#X connect 8 0 13 0;
#X connect 9 0 14 0;
#X connect 10 0 9 1;
#X connect 11 0 9 1;
#X connect 12 0 4 0;
#X connect 14 0 1 0;
#X restore 34 238 pd nice.labels;
#X msg 34 335 gui.row \$1 label \$2;
#X connect 1 0 0 0;
#X connect 2 0 5 0;
#X connect 3 0 4 0;
#X connect 4 0 17 0;
#X connect 5 0 3 0;
#X connect 6 0 5 1;
#X connect 7 0 5 1;
#X connect 8 0 11 0;
#X connect 8 1 9 0;
#X connect 9 0 10 0;
#X connect 9 0 11 1;
#X connect 10 0 9 1;
#X connect 11 0 18 0;
#X connect 12 0 7 0;
#X connect 12 1 1 0;
#X connect 12 2 6 0;
#X connect 12 3 13 0;
#X connect 13 0 9 1;
#X connect 15 0 16 0;
#X connect 16 0 12 0;
#X connect 17 0 8 0;
#X connect 18 0 14 0;
#X restore 15 193 pd scroll.logic;
#N canvas 674 72 489 451 close.patch 0;
#X obj 12 -221 r \$0.UNPATCH;
#X obj 12 -199 route gui.row;
#X obj 12 -177 route button;
#X obj 12 -155 route close;
#X obj 27 -133 r \$0.scrollbar;
#X obj 27 -111 route pos;
#X obj 12 -89 +;
#X msg 39 -46 patchlist in getbypos \$1;
#X obj 39 -25 s \$0.UNPATCH;
#X obj 33 -4 r \$0.UNPATCH;
#X obj 33 20 route patchlist;
#X obj 33 42 route out;
#X obj 12 63 list;
#X obj 281 -75 s \$0.UNPATCH;
#X obj 262 -50 f;
#X obj 300 -48 r \$0.scrollbar;
#X obj 300 -26 route pos;
#X msg 262 -1 set pos \$1;
#X obj 262 21 s \$0.scrollbar;
#X msg 281 -102 patchlist synclength;
#X obj 12 184 s \$0.send;
#X obj 12 -67 t b a;
#X obj 262 -213 r \$0.UNPATCH;
#X obj 262 -191 route patch;
#X obj 262 -169 route close;
#X obj 262 -147 t b b a;
#X msg 301 -126 patchlist in drop \$1;
#X msg 12 85 b /netclose \$1 \$2;
#X obj 12 108 list prepend 0;
#X obj 119 110 r \$0.UNPATCH;
#X obj 119 132 route protect;
#X obj 12 130 route 0 1;
#X obj 37 162 s \$0.local;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 6 0;
#X connect 4 0 5 0;
#X connect 5 0 6 1;
#X connect 6 0 21 0;
#X connect 7 0 8 0;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 11 0 12 1;
#X connect 12 0 27 0;
#X connect 14 0 17 0;
#X connect 15 0 16 0;
#X connect 16 0 14 1;
#X connect 17 0 18 0;
#X connect 19 0 13 0;
#X connect 21 0 12 0;
#X connect 21 1 7 0;
#X connect 22 0 23 0;
#X connect 23 0 24 0;
#X connect 24 0 25 0;
#X connect 25 0 14 0;
#X connect 25 1 19 0;
#X connect 25 2 26 0;
#X connect 26 0 13 0;
#X connect 27 0 28 0;
#X connect 28 0 31 0;
#X connect 29 0 30 0;
#X connect 30 0 28 1;
#X connect 31 0 20 0;
#X connect 31 1 32 0;
#X restore 15 236 pd close.patch;
#N canvas 756 296 236 366 show.gui 0;
#X obj 12 -221 r \$0.UNPATCH;
#X obj 12 -199 route gui.row;
#X obj 12 -177 route button;
#X obj 27 -133 r \$0.scrollbar;
#X obj 27 -111 route pos;
#X obj 12 -89 +;
#X msg 39 -46 patchlist in getbypos \$1;
#X obj 39 -25 s \$0.UNPATCH;
#X obj 33 -4 r \$0.UNPATCH;
#X obj 33 20 route patchlist;
#X obj 33 42 route out;
#X obj 12 63 list;
#X obj 12 -67 t b a;
#X obj 12 -155 route visgui;
#X obj 12 107 s \$0.UNPATCH;
#X msg 12 85 patch showgui \$1 \$2;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 13 0;
#X connect 3 0 4 0;
#X connect 4 0 5 1;
#X connect 5 0 12 0;
#X connect 6 0 7 0;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 10 0 11 1;
#X connect 11 0 15 0;
#X connect 12 0 11 0;
#X connect 12 1 6 0;
#X connect 13 0 5 0;
#X connect 15 0 14 0;
#X restore 15 256 pd show.gui;
#N canvas 756 268 236 363 show.code 0;
#X obj 12 -221 r \$0.UNPATCH;
#X obj 12 -199 route gui.row;
#X obj 12 -177 route button;
#X obj 27 -133 r \$0.scrollbar;
#X obj 27 -111 route pos;
#X obj 12 -89 +;
#X msg 39 -46 patchlist in getbypos \$1;
#X obj 39 -25 s \$0.UNPATCH;
#X obj 33 -4 r \$0.UNPATCH;
#X obj 33 20 route patchlist;
#X obj 33 42 route out;
#X obj 12 63 list;
#X obj 12 -67 t b a;
#X obj 12 -155 route vismain;
#X obj 12 107 s \$0.UNPATCH;
#X msg 12 85 patch showcode \$1 \$2;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 13 0;
#X connect 3 0 4 0;
#X connect 4 0 5 1;
#X connect 5 0 12 0;
#X connect 6 0 7 0;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 10 0 11 1;
#X connect 11 0 15 0;
#X connect 12 0 11 0;
#X connect 12 1 6 0;
#X connect 13 0 5 0;
#X connect 15 0 14 0;
#X restore 15 277 pd show.code;
#X text 194 82 ---------- testing ---------------------------------------
;
#N canvas 1093 128 284 177 set.scrollbar.colors 0;
#X obj -100 14 netpd-pref-get cr.display.clr 1;
#X msg -100 37 set frontcolor \$1 \$2 \$3;
#X obj -100 59 s \$0.scrollbar;
#X obj -99 137 s \$0.scrollbar;
#X msg -99 115 set bgcolor \$1 \$2 \$3;
#X obj -99 92 netpd-pref-get cr.background2.clr 1;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 4 0 3 0;
#X connect 5 0 4 0;
#X restore 235 21 pd set.scrollbar.colors;
#X obj 373 149 r \$0.UNPATCH;
#X obj 373 171 route patch;
#X msg 193 191 patch load \$1 \$2;
#X obj 373 192 route showgui showcode;
#X msg 373 268 \; pd-\$1-\$2 vis 0 \; pd-\$1-\$2 vis 1;
#X msg 437 218 \; pd-\$2.pd vis 0 \; pd-\$2.pd vis 1;
#X connect 0 0 3 0;
#X connect 1 0 8 0;
#X connect 3 0 4 0;
#X connect 4 0 2 0;
#X connect 5 0 22 0;
#X connect 6 0 5 0;
#X connect 7 0 5 1;
#X connect 8 0 9 0;
#X connect 9 0 0 0;
#X connect 10 0 22 0;
#X connect 20 0 21 0;
#X connect 21 0 23 0;
#X connect 22 0 12 0;
#X connect 23 0 24 0;
#X connect 23 1 25 0;
#X restore 17 157 pd unpatch_patch_manager;
#X text 83 82 GUI;
#N canvas 310 57 374 342 unpatch_communication 0;
#X obj 35 293 netpd-s /unpatch;
#X obj 35 21 r \$0.send;
#X obj 35 157 list;
#X obj 35 218 list split 1;
#X obj 35 179 t a a;
#X msg 128 191 \$1;
#X obj 35 253 list prepend OSC;
#X obj 35 273 list trim;
#X obj 200 20 netpd-r /unpatch;
#X obj 200 170 s \$0.receive;
#X obj 217 147 s \$0.sender;
#X obj 177 250 s \$0.socket;
#X obj 177 229 netpd-status-get socket 1;
#X obj 35 95 spigot;
#X obj 200 96 spigot;
#X obj 293 100 spigot;
#X obj 111 18 r \$0.UNPATCH;
#X obj 111 40 route ready;
#X obj 44 133 r \$0.send.dir;
#X obj 245 45 s \$0.sender.dir;
#X obj 217 65 s \$0.receive.dir;
#X connect 1 0 13 0;
#X connect 2 0 4 0;
#X connect 3 1 6 0;
#X connect 4 0 3 0;
#X connect 4 1 5 0;
#X connect 5 0 0 1;
#X connect 6 0 7 0;
#X connect 7 0 0 0;
#X connect 8 0 14 0;
#X connect 8 0 20 0;
#X connect 8 1 15 0;
#X connect 8 1 19 0;
#X connect 12 0 11 0;
#X connect 13 0 2 0;
#X connect 14 0 9 0;
#X connect 15 0 10 0;
#X connect 16 0 17 0;
#X connect 17 0 13 1;
#X connect 17 0 14 1;
#X connect 17 0 15 1;
#X connect 18 0 2 0;
#X restore 17 258 pd unpatch_communication;
#N canvas 646 308 222 200 unpatch_gui_stuff 0;
#N canvas 313 201 417 272 row.colors 0;
#X obj 44 97 s \$0.gui.bg1;
#X obj 44 22 netpd-pref-get cr.background1.clr 1;
#X obj 153 66 netpd-pref-get cr.background2.clr 1;
#X obj 171 113 netpd-pref-get cr.label.clr 1;
#X obj 153 235 s \$0.gui.bg2;
#X obj 44 44 netpd-rgb2iem;
#X obj 171 134 netpd-rgb2iem;
#X obj 153 89 netpd-rgb2iem;
#X obj 171 162 t b a;
#X obj 153 186 pack f f;
#X msg 153 208 color \$1 \$2;
#X msg 44 74 color \$1 -1;
#X connect 1 0 5 0;
#X connect 2 0 7 0;
#X connect 3 0 6 0;
#X connect 5 0 11 0;
#X connect 6 0 8 0;
#X connect 7 0 9 0;
#X connect 8 0 9 0;
#X connect 8 1 9 1;
#X connect 9 0 10 0;
#X connect 10 0 4 0;
#X connect 11 0 0 0;
#X restore 18 25 pd row.colors;
#N canvas 981 213 220 162 row.fonts 0;
#X obj 18 36 s \$0.gui.bg2;
#X obj 18 -6 netpd-pref-get cr.label.fnt 1;
#X obj 19 63 netpd-pref-get cr.title.fnt 1;
#X obj 19 106 s \$0.gui.title;
#X msg 19 85 label_font \$1 \$2;
#X msg 18 15 label_font \$1 \$2;
#X connect 1 0 5 0;
#X connect 2 0 4 0;
#X connect 4 0 3 0;
#X connect 5 0 0 0;
#X restore 18 50 pd row.fonts;
#N canvas 614 44 411 505 download.upload.status 0;
#X obj 5 3 r \$0.UNPATCH;
#X obj 5 25 route statusmsg;
#X obj 32 68 list;
#X obj 5 47 t a a;
#X obj 32 111 route abstraction patch;
#X msg 32 132 a;
#X msg 99 132 p;
#X obj 5 157 list append;
#X obj 5 179 list trim;
#X obj 5 202 route upload download;
#X obj 5 232 route begin end;
#X obj 171 237 route request begin end;
#X obj 5 369 t a a;
#X obj 171 382 t a a;
#X obj 5 254 list;
#X obj 48 256 list;
#X obj 171 262 list;
#X obj 216 261 list;
#X obj 261 261 list;
#X msg 32 89 \$4;
#X msg 19 290 uploaded \$3(\$4) to \$1;
#X msg 5 314 uploading \$3(\$4) to \$1;
#X msg 261 289 saved \$2 \$3;
#X msg 216 324 downloading \$3(\$4) from \$1;
#X msg 171 355 waiting for \$1 to send_\$3(\$4);
#X obj 5 452 s \$0.upload.status;
#X obj 171 460 s \$0.download.status;
#N canvas 856 44 435 366 load.patch 0;
#X obj 16 32 route patch;
#X obj 17 303 s \$0.download.status;
#X obj 16 54 route load;
#X obj 16 106 route loading.. loading...;
#X obj 17 130 list;
#X msg 16 76 \$2 \$1;
#X obj 16 10 r \$0.UNPATCH;
#X msg 17 152 \$2 \$1;
#X obj 17 184 t a a a;
#X obj 36 214 s \$0.load.patch;
#X msg 56 250 loading \$1-\$2...;
#X msg 17 278 loaded \$1-\$2;
#X connect 0 0 2 0;
#X connect 2 0 5 0;
#X connect 3 2 4 0;
#X connect 4 0 7 0;
#X connect 5 0 3 0;
#X connect 6 0 0 0;
#X connect 7 0 8 0;
#X connect 8 0 11 0;
#X connect 8 1 9 0;
#X connect 8 2 10 0;
#X connect 10 0 1 0;
#X connect 11 0 1 0;
#X restore 194 27 pd load.patch;
#N canvas 933 260 260 255 close.patch 0;
#X obj 16 10 r \$0.UNPATCH;
#X obj 16 32 route patch;
#X obj 17 184 s \$0.download.status;
#X obj 16 106 route loading.. loading...;
#X obj 17 130 list;
#X msg 16 76 \$2 \$1;
#X obj 16 54 route close;
#X msg 17 156 closed \$2-\$1;
#X connect 0 0 1 0;
#X connect 1 0 6 0;
#X connect 3 2 4 0;
#X connect 4 0 7 0;
#X connect 5 0 3 0;
#X connect 6 0 5 0;
#X connect 7 0 2 0;
#X restore 194 50 pd close.patch;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 2 0 19 0;
#X connect 3 0 7 0;
#X connect 3 1 2 0;
#X connect 4 0 5 0;
#X connect 4 1 6 0;
#X connect 5 0 7 1;
#X connect 6 0 7 1;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 9 1 11 0;
#X connect 10 0 14 0;
#X connect 10 1 15 0;
#X connect 11 0 16 0;
#X connect 11 1 17 0;
#X connect 11 2 18 0;
#X connect 12 0 25 0;
#X connect 13 0 26 0;
#X connect 14 0 21 0;
#X connect 15 0 20 0;
#X connect 16 0 24 0;
#X connect 17 0 23 0;
#X connect 18 0 22 0;
#X connect 19 0 4 0;
#X connect 20 0 12 0;
#X connect 21 0 12 0;
#X connect 22 0 13 0;
#X connect 23 0 13 0;
#X connect 24 0 13 0;
#X restore 16 75 pd download.upload.status;
#X restore 17 183 pd unpatch_gui_stuff;
#N canvas 520 75 402 554 unpatch_patch_containers 0;
#X obj 35 34 t a a;
#X obj 89 317 s pd-\$0.container.container;
#X obj 62 142 f;
#X obj 62 164 + 1;
#X obj 62 184 t a a;
#X obj 62 206 * 20;
#X obj 62 228 list append \$0;
#X obj 62 250 list append;
#X obj 62 77 -;
#X msg 62 56 \$1;
#X obj 62 98 moses 1;
#X obj 62 120 until;
#X text 110 136 create patch.containers;
#X text 110 151 when needed;
#X msg 62 272 obj 10 \$1 pd \$2.patch.container.\$3;
#X obj 62 294 t a a;
#X obj 62 362 list;
#X msg 62 388 \; pd-\$5 vis 0;
#X obj 35 460 list append \$0;
#N canvas 1089 230 196 210 close.patch 0;
#X obj 16 10 r \$0.UNPATCH;
#X obj 16 32 route patch;
#X obj 16 106 route loading.. loading...;
#X obj 17 130 list;
#X msg 16 76 \$2 \$1;
#X obj 16 54 route close;
#X msg 17 152 \$2 \$1;
#X obj 17 174 outlet;
#X connect 0 0 1 0;
#X connect 1 0 5 0;
#X connect 2 2 3 0;
#X connect 3 0 6 0;
#X connect 4 0 2 0;
#X connect 5 0 4 0;
#X connect 6 0 7 0;
#X restore 158 15 pd close.patch;
#X obj 158 46 list append \$0;
#X msg 158 68 \; pd-\$3.patch.container.\$1 clear;
#X msg 35 482 \; pd-\$3.patch.container.\$1 obj 10 20 ../patches/\$2
\$1 \; pd-\$1-\$2 vis 0 \; pd-\$3.patch.container.\$1 loadbang \;;
#X obj 35 12 r \$0.load.patch;
#X obj 89 340 unpatch-container \$0;
#X msg 103 295 clear;
#X obj 35 429 netpd-dsp-off;
#X connect 0 0 26 0;
#X connect 0 1 9 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 4 1 7 1;
#X connect 4 1 8 1;
#X connect 4 1 2 1;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 7 0 14 0;
#X connect 8 0 10 0;
#X connect 9 0 8 0;
#X connect 10 1 11 0;
#X connect 11 0 2 0;
#X connect 14 0 15 0;
#X connect 15 0 16 0;
#X connect 15 1 1 0;
#X connect 16 0 17 0;
#X connect 18 0 22 0;
#X connect 19 0 20 0;
#X connect 20 0 21 0;
#X connect 23 0 0 0;
#X connect 25 0 1 0;
#X connect 26 0 18 0;
#X restore 17 233 pd unpatch_patch_containers;
#N canvas 676 53 466 626 unpatch_netload 0;
#N canvas 394 67 509 474 negotiate.free.slot 0;
#X obj 93 153 netpd-status-get socket 1;
#X obj 73 259 r \$0.sender;
#X msg 24 37 0;
#X msg 24 86 b /ifslotfree \$1;
#X obj 24 130 routeOSC /ifslotfree;
#N canvas 181 244 357 391 find.free.slot 0;
#X obj 27 19 inlet;
#X obj 27 88 f;
#X obj 27 111 + 1;
#X obj 27 64 until;
#X msg 46 155 patchlist in get \$1;
#X obj 46 177 s \$0.UNPATCH;
#X obj 46 198 r \$0.UNPATCH;
#X obj 46 220 route patchlist;
#X obj 46 242 route out;
#X obj 27 133 t b a a;
#X obj 27 265 list;
#X obj 27 287 sel empty;
#X obj 27 309 t b b;
#X obj 27 331 f;
#X obj 209 183 b;
#X obj 27 353 outlet;
#X obj 27 41 t b a;
#X text 88 21 try to find a free patch id \, starting from;
#X text 88 33 given number;
#X connect 0 0 16 0;
#X connect 1 0 2 0;
#X connect 2 0 1 1;
#X connect 2 0 9 0;
#X connect 3 0 1 0;
#X connect 4 0 5 0;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 10 1;
#X connect 9 0 10 0;
#X connect 9 1 4 0;
#X connect 9 2 13 1;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 13 0;
#X connect 12 1 14 0;
#X connect 13 0 15 0;
#X connect 14 0 3 1;
#X connect 16 0 3 0;
#X connect 16 1 1 1;
#X restore 24 62 pd find.free.slot;
#X obj 95 443 s \$0.UNPATCH;
#X obj 24 179 list prepend;
#X obj 24 261 route;
#N canvas 530 449 186 275 sanity.check 0;
#X obj 28 17 inlet;
#X obj 28 239 outlet;
#X msg 47 64 patchlist in get \$1;
#X obj 47 86 s \$0.UNPATCH;
#X obj 47 108 r \$0.UNPATCH;
#X obj 47 130 route patchlist;
#X obj 47 152 route out;
#X obj 28 173 list;
#X obj 28 43 t b a a;
#X obj 28 195 sel empty;
#X obj 28 217 f;
#X connect 0 0 8 0;
#X connect 2 0 3 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 7 1;
#X connect 7 0 9 0;
#X connect 8 0 7 0;
#X connect 8 1 2 0;
#X connect 8 2 10 1;
#X connect 9 0 10 0;
#X connect 10 0 1 0;
#X restore 51 303 pd sanity.check;
#X msg 95 420 patch load \$1 loading...;
#X msg 51 282 \$2;
#N canvas 520 262 194 279 sanity.check 0;
#X obj 28 17 inlet;
#X obj 28 239 outlet;
#X msg 47 64 patchlist in get \$1;
#X obj 47 86 s \$0.UNPATCH;
#X obj 47 108 r \$0.UNPATCH;
#X obj 47 130 route patchlist;
#X obj 47 152 route out;
#X obj 28 173 list;
#X obj 28 43 t b a a;
#X obj 28 195 sel empty;
#X obj 28 217 f;
#X obj 79 218 b;
#X obj 79 242 outlet;
#X connect 0 0 8 0;
#X connect 2 0 3 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 7 1;
#X connect 7 0 9 0;
#X connect 8 0 7 0;
#X connect 8 1 2 0;
#X connect 8 2 10 1;
#X connect 9 0 10 0;
#X connect 9 1 11 0;
#X connect 10 0 1 0;
#X connect 11 0 12 0;
#X restore 24 331 pd sanity.check;
#X obj 24 353 t a a;
#X obj 341 146 b;
#X obj 24 11 inlet;
#X obj 24 416 outlet;
#X text 109 282 reserve slot \, if remote peer performed the request
;
#X text 136 333 if origin is local \, proceed with netloading patch
;
#X msg 51 375 patch load \$1 loading..;
#X text 195 375 <- use a different symbol \, if is local;
#X text 213 389 in order to set 'readyness' for that slot;
#N canvas 311 182 366 304 protected.mode 0;
#X obj 25 135 s \$0.send;
#X obj 25 174 r \$0.receive;
#X obj 230 91 r \$0.UNPATCH;
#X obj 230 113 route protect;
#X obj 25 52 list prepend 0;
#X obj 25 75 route 0 1;
#X obj 25 197 spigot 1;
#X obj 230 142 == 0;
#X obj 25 30 inlet;
#X obj 25 269 outlet;
#X obj 50 100 s \$0.local;
#X obj 48 221 r \$0.local;
#X text 88 16 use local communication in protected mode;
#X text 104 32 and block external incoming messages;
#X obj 48 243 route b;
#X connect 1 0 6 0;
#X connect 2 0 3 0;
#X connect 3 0 4 1;
#X connect 3 0 7 0;
#X connect 4 0 5 0;
#X connect 5 0 0 0;
#X connect 5 1 10 0;
#X connect 6 0 9 0;
#X connect 7 0 6 1;
#X connect 8 0 4 0;
#X connect 11 0 14 0;
#X connect 14 0 9 0;
#X restore 24 108 pd protected.mode;
#X obj 24 201 t a a;
#X obj 83 227 spigot 0;
#X msg 83 207 \$1;
#X obj 128 182 r \$0.UNPATCH;
#X obj 128 204 route protect;
#X connect 0 0 7 1;
#X connect 1 0 8 1;
#X connect 2 0 5 0;
#X connect 3 0 22 0;
#X connect 4 0 7 0;
#X connect 5 0 3 0;
#X connect 7 0 23 0;
#X connect 8 0 12 0;
#X connect 8 1 11 0;
#X connect 9 0 10 0;
#X connect 10 0 6 0;
#X connect 11 0 9 0;
#X connect 12 0 13 0;
#X connect 12 1 14 0;
#X connect 13 0 16 0;
#X connect 13 1 19 0;
#X connect 14 0 2 0;
#X connect 15 0 2 0;
#X connect 19 0 6 0;
#X connect 22 0 4 0;
#X connect 23 0 8 0;
#X connect 23 1 25 0;
#X connect 24 0 8 1;
#X connect 25 0 24 0;
#X connect 26 0 27 0;
#X connect 27 0 24 1;
#X restore 8 125 pd negotiate.free.slot;
#X obj 8 148 list append;
#N canvas 405 203 219 261 buffer 0;
#X obj 16 142 netpd-fifo;
#X obj 16 70 t b a;
#X obj 16 96 spigot 1;
#X obj 16 165 t a b;
#X msg 43 185 0;
#X msg 73 185 1;
#X obj 16 34 inlet;
#X obj 158 35 inlet;
#X obj 158 57 b;
#X obj 168 137 t a;
#X obj 16 217 outlet;
#X connect 0 0 3 0;
#X connect 0 1 5 0;
#X connect 1 0 2 0;
#X connect 1 1 0 1;
#X connect 2 0 0 0;
#X connect 3 0 10 0;
#X connect 3 1 4 0;
#X connect 4 0 9 0;
#X connect 5 0 9 0;
#X connect 6 0 1 0;
#X connect 7 0 8 0;
#X connect 8 0 0 0;
#X connect 9 0 2 1;
#X restore 8 37 pd buffer;
#X obj 8 94 t b a;
#X obj 27 295 netpd-dependencies;
#X msg 27 271 \$2;
#X obj 8 170 t a b;
#X obj 27 345 list trim;
#X obj 132 376 route bang;
#X msg 132 398 1;
#X msg 189 398 0;
#X obj 27 320 list prepend b /check;
#X msg 8 466 b /netload \$1 \$2;
#X obj 224 398 netpd-error unpatch;
#X obj 8 598 s \$0.send;
#X text 51 92 only process the next request \, if the previous has
been completed;
#X obj 8 222 t a a a;
#X text 108 344 /check <type> <name> <ver> <ver> <ver>;
#X text 157 244 /check slot <slot>;
#X obj 237 533 print DEBUG/UPLOAD;
#X obj 237 512 spigot;
#X obj 270 489 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg 47 245 b /check slot \$1;
#X obj 8 396 list prepend;
#X obj 8 418 route 1 0;
#X text 116 466 if all dependencies are satisfied \, load patch;
#X text 113 426 if dependency missing \, clear placeholder 'loading...'
;
#X text 171 298 and on success proceed to netloading patch;
#X text 171 286 resolve all dependencies of given patch;
#X text 144 292 <--;
#N canvas 786 81 348 533 singleton.check 0;
#X obj 10 7 inlet;
#X obj 10 455 outlet;
#X msg 27 70 ../patches/\$2.pd;
#X obj 27 92 netpd-properties;
#X obj 27 114 route singleton;
#X obj 46 227 s \$0.UNPATCH;
#X obj 44 274 r \$0.UNPATCH;
#X obj 44 325 route patchlist;
#X obj 44 347 route out;
#X msg 44 50 symbol \$2;
#X obj 27 136 b;
#X obj 27 158 symbol;
#X msg 27 252 0;
#X msg 78 252 1;
#X obj 44 301 spigot;
#X obj 10 29 t a a a b;
#X obj 182 208 b;
#X obj 10 398 list prepend;
#X msg 44 369 1;
#X msg 79 368 0;
#X obj 10 420 route 0 1;
#X obj 55 444 unpack f s;
#X obj 70 486 netpd-error unpatch;
#N canvas 816 192 196 239 clean.patchlist.window 0;
#X obj 45 83 s \$0.UNPATCH;
#X msg 45 62 patchlist in drop \$1;
#X obj 33 103 r \$0.scrollbar;
#X obj 33 125 route pos;
#X obj 18 198 s \$0.scrollbar;
#X obj 18 40 t b a;
#X obj 18 157 f;
#X msg 18 178 pos \$1;
#X obj 18 16 inlet;
#X connect 1 0 0 0;
#X connect 2 0 3 0;
#X connect 3 0 6 1;
#X connect 5 0 6 0;
#X connect 5 1 1 0;
#X connect 6 0 7 0;
#X connect 7 0 4 0;
#X connect 8 0 5 0;
#X restore 55 507 pd clean.patchlist.window;
#X msg 70 466 can't load many instances of singleton \$1;
#X msg 46 205 patchlist in find \$1;
#X obj 27 180 t b a b;
#X connect 0 0 15 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 10 0;
#X connect 6 0 14 0;
#X connect 7 0 8 0;
#X connect 8 0 18 0;
#X connect 9 0 11 1;
#X connect 10 0 11 0;
#X connect 11 0 26 0;
#X connect 12 0 14 1;
#X connect 13 0 14 1;
#X connect 14 0 7 0;
#X connect 15 0 17 0;
#X connect 15 1 2 0;
#X connect 15 2 9 0;
#X connect 15 3 16 0;
#X connect 16 0 19 0;
#X connect 17 0 20 0;
#X connect 18 0 17 1;
#X connect 19 0 17 1;
#X connect 20 0 1 0;
#X connect 20 1 21 0;
#X connect 21 0 23 0;
#X connect 21 1 24 0;
#X connect 24 0 22 0;
#X connect 25 0 5 0;
#X connect 26 0 12 0;
#X connect 26 1 25 0;
#X connect 26 2 13 0;
#X restore 8 195 pd singleton.check;
#X msg 33 442 b /netclose \$1 loading...;
#N canvas 623 247 461 369 netpd.patch.spec.check 0;
#X obj 21 10 inlet;
#X obj 21 297 outlet;
#X obj 197 80 netpd-properties;
#N canvas 807 501 142 203 get.unpatch.version 0;
#X obj 35 61 s up.getversion;
#X obj 37 81 r up.version;
#X obj 16 125 list;
#X obj 16 38 t b b b;
#X msg 55 103 empty;
#X obj 16 15 inlet;
#X obj 16 171 outlet;
#X obj 16 147 list trim;
#X connect 1 0 2 1;
#X connect 2 0 7 0;
#X connect 3 0 2 0;
#X connect 3 1 0 0;
#X connect 3 2 4 0;
#X connect 4 0 2 1;
#X connect 5 0 3 0;
#X connect 7 0 6 0;
#X restore 21 80 pd get.unpatch.version;
#X obj 21 102 route empty;
#X obj 21 124 b;
#X obj 21 249 list append;
#X obj 21 272 list trim;
#X obj 84 125 unpack f f;
#X obj 197 147 unpack f f;
#X obj 84 153 ==;
#X obj 84 175 sel 1;
#X obj 141 175 >=;
#X obj 84 199 f;
#X obj 84 221 sel 1;
#X obj 21 57 t b a a a;
#X obj 144 256 list append;
#X obj 144 278 list append;
#X obj 197 123 t a a;
#X obj 144 232 b;
#X obj 197 101 route NETPD_PATCH_SPEC;
#X obj 144 324 netpd-error unpatch;
#X msg 197 57 ../patches/\$1.pd;
#X msg 144 299 \$1: patch spec (\$2 \$3) not supported by unpatch;
#X obj 21 32 list;
#X obj 92 301 outlet;
#X connect 0 0 24 0;
#X connect 2 0 20 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 4 1 8 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 7 0 1 0;
#X connect 8 0 10 0;
#X connect 8 1 12 0;
#X connect 9 0 10 1;
#X connect 9 1 12 1;
#X connect 10 0 11 0;
#X connect 11 0 13 0;
#X connect 11 1 19 0;
#X connect 12 0 13 1;
#X connect 13 0 14 0;
#X connect 14 0 6 0;
#X connect 14 1 19 0;
#X connect 15 0 3 0;
#X connect 15 1 22 0;
#X connect 15 2 6 1;
#X connect 15 3 16 1;
#X connect 16 0 17 0;
#X connect 17 0 23 0;
#X connect 18 0 9 0;
#X connect 18 1 17 1;
#X connect 19 0 16 0;
#X connect 19 0 25 0;
#X connect 20 0 18 0;
#X connect 22 0 2 0;
#X connect 23 0 21 0;
#X connect 24 0 15 0;
#X restore 8 63 pd netpd.patch.spec.check;
#X obj 218 9 r \$0.UNPATCH;
#X obj 218 31 route ready;
#X obj 218 53 t a a;
#X obj 212 136 spigot;
#X obj 218 74 sel 1;
#N canvas 765 86 317 345 parse.netload.input 0;
#X obj 25 266 outlet;
#X obj 25 11 r \$0.netload;
#X obj 25 44 unpatch-reparsemsg;
#N canvas 586 154 462 465 /new.command 0;
#X obj 26 27 inlet;
#X obj 83 75 outlet;
#X obj 26 54 route /new;
#X obj 26 85 symbol;
#X obj 26 153 netpd-if-file;
#X msg 26 130 symbol ../patches/\$1.pd;
#X obj 26 107 t a a;
#X obj 26 176 sel 0 1;
#X obj 149 203 symbol;
#X obj 149 247 netpd-error unpatch;
#X msg 149 225 can't overwrite existing patch: \$1;
#X obj 26 211 symbol;
#X obj 60 288 unpatch-template;
#X obj 60 309 list prepend add;
#X obj 60 331 list trim;
#X obj 77 409 textfile;
#X msg 77 264 clear;
#X obj 26 241 t a a a b;
#X msg 43 357 write ../patches/\$1.pd;
#X connect 0 0 2 0;
#X connect 2 0 3 0;
#X connect 2 1 1 0;
#X connect 3 0 6 0;
#X connect 4 0 7 0;
#X connect 5 0 4 0;
#X connect 6 0 5 0;
#X connect 6 1 8 1;
#X connect 6 1 11 1;
#X connect 7 0 11 0;
#X connect 7 1 8 0;
#X connect 8 0 10 0;
#X connect 10 0 9 0;
#X connect 11 0 17 0;
#X connect 12 0 13 0;
#X connect 13 0 14 0;
#X connect 14 0 15 0;
#X connect 16 0 15 0;
#X connect 17 0 1 0;
#X connect 17 1 18 0;
#X connect 17 2 12 0;
#X connect 17 3 16 0;
#X connect 18 0 15 0;
#X restore 25 78 pd /new.command;
#N canvas 586 154 496 353 /help.command 0;
#X obj 26 27 inlet;
#X obj 89 76 outlet;
#X obj 26 54 route /help;
#X obj 26 118 t b b b b b b b b b b b b b;
#X obj 25 303 print UNPATCH;
#X msg 171 168 /help : print this help;
#X msg 158 194 /new <patchname> : create new netpd-patch;
#X msg 185 143 ... \, available commands:;
#X msg 145 221 /dev on|off : turn protected (developer) mode on|off
;
#X connect 0 0 2 0;
#X connect 2 0 3 0;
#X connect 2 1 1 0;
#X connect 3 9 8 0;
#X connect 3 10 6 0;
#X connect 3 11 5 0;
#X connect 3 12 7 0;
#X connect 5 0 4 0;
#X connect 6 0 4 0;
#X connect 7 0 4 0;
#X connect 8 0 4 0;
#X restore 25 125 pd /help.command;
#N canvas 586 266 289 334 /dev.command 0;
#X obj 26 27 inlet;
#X obj 83 77 outlet;
#X obj 26 293 print UNPATCH;
#X obj 26 54 route /dev;
#X obj 26 132 sel on off;
#X obj 26 87 list;
#X obj 26 109 route symbol float;
#X msg 26 223 activated;
#X msg 54 202 deactiviated;
#X obj 26 246 list;
#X msg 26 268 developer mode \$1;
#X obj 26 155 t a;
#X obj 54 156 t a;
#X msg 191 220 0;
#X msg 164 220 1;
#X msg 164 245 protect \$1;
#X obj 164 267 s \$0.UNPATCH;
#X obj 93 132 sel 1 0;
#X connect 0 0 3 0;
#X connect 3 0 5 0;
#X connect 3 1 1 0;
#X connect 4 0 11 0;
#X connect 4 1 12 0;
#X connect 5 0 6 0;
#X connect 6 0 4 0;
#X connect 6 1 17 0;
#X connect 7 0 9 0;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 10 0 2 0;
#X connect 11 0 7 0;
#X connect 11 0 14 0;
#X connect 12 0 8 0;
#X connect 12 0 13 0;
#X connect 13 0 15 0;
#X connect 14 0 15 0;
#X connect 15 0 16 0;
#X connect 17 0 11 0;
#X connect 17 1 12 0;
#X restore 25 101 pd /dev.command;
#X text 152 44 <- ugly hack due to lack;
#X text 173 58 of better solution;
#N canvas 1140 235 292 254 if.patch.check 0;
#X obj 10 115 netpd-if-file;
#X obj 10 69 t a a;
#X obj 10 167 symbol;
#X obj 110 167 symbol;
#X obj 10 137 sel 1 0;
#X msg 110 189 no such patch: \$1;
#X obj 110 211 netpd-error unpatch;
#X msg 10 91 symbol ../patches/\$1.pd;
#X obj 10 48 list;
#X obj 10 17 inlet;
#X obj 10 197 outlet;
#X connect 0 0 4 0;
#X connect 1 0 7 0;
#X connect 1 1 2 1;
#X connect 1 1 3 1;
#X connect 2 0 10 0;
#X connect 3 0 5 0;
#X connect 4 0 2 0;
#X connect 4 1 3 0;
#X connect 5 0 6 0;
#X connect 7 0 0 0;
#X connect 8 0 1 0;
#X connect 9 0 8 0;
#X restore 25 226 pd if.patch.check;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 5 0;
#X connect 4 0 8 0;
#X connect 5 0 4 0;
#X connect 8 0 0 0;
#X restore 8 15 pd parse.netload.input;
#X obj 8 555 route 0 1;
#X obj 130 561 r \$0.UNPATCH;
#X obj 130 583 route protect;
#X obj 33 577 s \$0.local;
#X obj 8 495 t a a;
#X obj 8 535 list prepend 0;
#X connect 0 0 1 0;
#X connect 1 0 6 0;
#X connect 2 0 32 0;
#X connect 3 0 0 0;
#X connect 3 1 1 1;
#X connect 4 0 11 0;
#X connect 4 1 8 0;
#X connect 5 0 4 0;
#X connect 6 0 30 0;
#X connect 6 1 36 0;
#X connect 7 0 43 0;
#X connect 8 0 9 0;
#X connect 8 1 10 0;
#X connect 8 1 13 0;
#X connect 9 0 23 1;
#X connect 10 0 23 1;
#X connect 11 0 7 0;
#X connect 12 0 43 0;
#X connect 16 0 23 0;
#X connect 16 1 5 0;
#X connect 16 2 22 0;
#X connect 20 0 19 0;
#X connect 21 0 20 1;
#X connect 22 0 43 0;
#X connect 23 0 24 0;
#X connect 24 0 12 0;
#X connect 24 1 31 0;
#X connect 30 0 16 0;
#X connect 31 0 43 0;
#X connect 32 0 3 0;
#X connect 32 1 36 0;
#X connect 33 0 34 0;
#X connect 34 0 35 0;
#X connect 35 0 37 0;
#X connect 35 1 36 1;
#X connect 36 0 2 1;
#X connect 37 0 2 1;
#X connect 38 0 2 0;
#X connect 39 0 14 0;
#X connect 39 1 42 0;
#X connect 40 0 41 0;
#X connect 41 0 44 1;
#X connect 43 0 44 0;
#X connect 43 1 20 0;
#X connect 44 0 39 0;
#X restore 17 105 pd unpatch_netload;
#N canvas 528 455 224 200 unpatch_sync 0;
#N canvas 592 380 345 211 post.sync.request 0;
#X msg 13 138 \$1 /patchlist/request;
#X obj 13 158 s \$0.send;
#X obj 13 10 inlet;
#X obj 86 107 outlet;
#X msg 32 88 dsp \$1;
#X obj 32 110 s pd;
#X msg 32 62 0;
#X obj 86 85 netpd-status-get dsp;
#X obj 13 34 t a b b;
#X connect 0 0 1 0;
#X connect 2 0 8 0;
#X connect 4 0 5 0;
#X connect 6 0 4 0;
#X connect 7 0 3 0;
#X connect 8 0 0 0;
#X connect 8 1 6 0;
#X connect 8 2 7 0;
#X restore 10 67 pd post.sync.request;
#N canvas 680 44 431 588 post.sync.supply 0;
#X obj 5 -17 r \$0.receive;
#X obj 5 63 routeOSC /patchlist/request;
#X obj 57 358 netpd-dependencies;
#X obj 57 426 list trim;
#X obj 40 268 list prepend;
#X obj 172 171 r \$0.sender;
#X msg 74 311 \$1 /check slot \$2;
#X msg 57 337 \$3;
#X obj 57 383 list prepend /check;
#X obj 57 405 list prepend;
#X msg 126 334 \$1;
#X obj 40 290 t a a a a;
#X msg 40 454 \$1 /netload \$2 \$3;
#X obj 175 358 route bang;
#X obj 244 358 netpd-error unpatch;
#X obj 40 534 s \$0.send;
#X obj 40 513 t a;
#X obj 5 290 f;
#X msg 5 476 \$1 /synced;
#N canvas 1085 128 185 249 get.patch.list 0;
#X msg 41 53 patchlist in getall;
#X obj 41 75 s \$0.UNPATCH;
#X obj 41 97 r \$0.UNPATCH;
#X obj 41 141 route out;
#X obj 42 189 spigot;
#X msg 61 163 1;
#X msg 22 163 0;
#X obj 41 119 route patchlist;
#X obj 22 33 t b b b;
#X obj 22 10 inlet;
#X obj 42 211 outlet;
#X connect 0 0 1 0;
#X connect 2 0 7 0;
#X connect 3 0 4 0;
#X connect 4 0 10 0;
#X connect 5 0 4 1;
#X connect 6 0 4 1;
#X connect 7 0 3 0;
#X connect 8 0 6 0;
#X connect 8 1 0 0;
#X connect 8 2 5 0;
#X connect 9 0 8 0;
#X restore 40 154 pd get.patch.list;
#X obj 40 175 list prepend;
#X obj 40 133 t b a;
#X obj 40 197 route 1 0;
#X obj 5 86 t b b b;
#X msg 70 109 0;
#X msg 40 110 1;
#X obj 65 219 list prepend;
#X msg 65 241 \$1 /ifslotfree \$2;
#X text 185 243 <- reserve slots (show 'loading...');
#X obj 5 12 spigot 1;
#X obj 92 -13 r \$0.UNPATCH;
#X obj 92 9 route protect;
#X obj 92 31 == 0;
#X connect 0 0 29 0;
#X connect 1 0 23 0;
#X connect 2 0 8 0;
#X connect 2 1 13 0;
#X connect 3 0 16 0;
#X connect 4 0 11 0;
#X connect 5 0 4 1;
#X connect 5 0 17 1;
#X connect 5 0 26 1;
#X connect 6 0 16 0;
#X connect 7 0 2 0;
#X connect 8 0 9 0;
#X connect 9 0 3 0;
#X connect 10 0 9 1;
#X connect 11 0 12 0;
#X connect 11 1 7 0;
#X connect 11 2 6 0;
#X connect 11 3 10 0;
#X connect 12 0 16 0;
#X connect 13 1 14 0;
#X connect 16 0 15 0;
#X connect 17 0 18 0;
#X connect 18 0 16 0;
#X connect 19 0 20 0;
#X connect 20 0 22 0;
#X connect 21 0 19 0;
#X connect 21 1 20 1;
#X connect 22 0 4 0;
#X connect 22 1 26 0;
#X connect 23 0 17 0;
#X connect 23 1 25 0;
#X connect 23 2 24 0;
#X connect 24 0 21 0;
#X connect 25 0 21 0;
#X connect 26 0 27 0;
#X connect 27 0 16 0;
#X connect 29 0 1 0;
#X connect 30 0 31 0;
#X connect 31 0 32 0;
#X connect 32 0 29 1;
#X restore 26 93 pd post.sync.supply;
#N canvas 610 85 300 296 find.peer 0;
#X obj 12 109 netpd-find-sync /unpatch;
#X obj 12 16 loadbang;
#X msg 12 38 unready \, find;
#X obj 120 11 r \$0.UNPATCH;
#X obj 120 33 route synced;
#X msg 120 61 ready;
#X obj 12 131 outlet;
#X obj 12 87 t a a;
#X msg 71 212 0;
#X msg 71 236 ready \$1;
#X obj 71 258 s \$0.UNPATCH;
#X obj 71 189 route unready ready;
#X msg 126 210 1;
#X msg 153 134 synced;
#X obj 153 156 s \$0.UNPATCH;
#X connect 0 0 6 0;
#X connect 0 1 13 0;
#X connect 1 0 2 0;
#X connect 2 0 7 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 7 0;
#X connect 7 0 0 0;
#X connect 7 1 11 0;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 11 0 8 0;
#X connect 11 1 12 0;
#X connect 12 0 9 0;
#X connect 13 0 14 0;
#X restore 10 18 pd find.peer;
#N canvas 722 44 481 417 negotiate.protocol.version 0;
#X obj 13 48 inlet;
#X obj 14 378 outlet;
#X text 7 6 Primitive version check;
#X text 7 18 If no match \, no talk;
#X obj 339 317 r \$0.sender;
#X msg 13 68 \$1 /protocol/ask;
#X obj 270 227 routeOSC /protocol/ask;
#X obj 333 269 route protocol_version;
#X obj 270 249 b;
#X obj 270 294 list append;
#X obj 333 249 r \$0.UNPATCH;
#X obj 270 338 list prepend;
#X msg 270 358 \$1 /protocol/version \$2 \$3;
#X obj 14 145 routeOSC /protocol/version;
#X obj 14 199 route;
#X obj 14 236 route;
#X obj 69 207 unpack f f;
#X obj 69 186 route protocol_version;
#X obj 69 166 r \$0.UNPATCH;
#X obj 14 285 f;
#X obj 14 259 b;
#X obj 14 167 t a a;
#X obj 101 289 list append;
#X obj 101 268 b;
#X obj 101 312 list append;
#N canvas 271 72 761 322 post.appropriate.error 0;
#X obj 32 273 netpd-error unpatch;
#X obj 32 80 netpd-version-compare;
#X obj 32 11 inlet;
#X msg 32 57 \$1 \$2 0;
#X msg 155 58 \$3 \$4 0;
#X text 207 59 local;
#X text 81 59 remote;
#X obj 32 33 t a a a;
#X obj 32 102 sel 1 -1;
#X msg 95 105 \$1 \$2;
#X obj 32 153 list append;
#X obj 32 186 list prepend;
#N canvas 112 285 385 131 msg 0;
#X msg 10 45 can't talk to newer unpatch (v\$2.\$3) on socket \$1 \,
please update netpd!;
#X obj 10 18 inlet;
#X obj 10 80 outlet;
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X restore 32 208 pd msg;
#N canvas 112 285 385 131 msg 0;
#X obj 10 18 inlet;
#X obj 10 80 outlet;
#X msg 10 45 can't talk to out-dated unpatch on socket \$1;
#X connect 0 0 2 0;
#X connect 2 0 1 0;
#X restore 113 209 pd msg;
#X obj 221 165 s \$0.send.dir;
#X obj 221 187 r \$0.receive.dir;
#X msg 284 80 \$3 \$4;
#X obj 221 123 list prepend;
#X obj 221 209 routeOSC /protocol/found_new_version;
#X obj 113 187 f;
#X msg 221 145 \$1 /protocol/found_new_version \$2 \$3;
#X obj 221 231 list prepend;
#X msg 221 253 newer unpatch (v\$2.\$3) found at client \$1 \, please
update netpd!;
#X obj 314 48 r \$0.sender.dir;
#X obj 221 102 list append;
#X connect 1 0 8 0;
#X connect 2 0 7 0;
#X connect 3 0 1 0;
#X connect 4 0 1 1;
#X connect 7 0 3 0;
#X connect 7 1 4 0;
#X connect 7 2 9 0;
#X connect 7 2 16 0;
#X connect 8 0 10 0;
#X connect 8 1 19 0;
#X connect 8 1 24 0;
#X connect 9 0 10 1;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 0 0;
#X connect 13 0 0 0;
#X connect 15 0 18 0;
#X connect 16 0 24 1;
#X connect 17 0 20 0;
#X connect 18 0 21 0;
#X connect 19 0 13 0;
#X connect 20 0 14 0;
#X connect 21 0 22 0;
#X connect 22 0 0 0;
#X connect 23 0 11 1;
#X connect 23 0 17 1;
#X connect 23 0 19 1;
#X connect 23 0 21 1;
#X connect 24 0 17 0;
#X restore 101 335 pd post.appropriate.error;
#X obj 14 123 r \$0.receive.dir;
#X obj 13 88 s \$0.send.dir;
#X obj 270 379 s \$0.send;
#X obj 270 205 r \$0.receive;
#X obj 54 242 r \$0.sender.dir;
#X obj 14 310 t a b;
#X msg 41 335 ready 1;
#X obj 41 357 s \$0.UNPATCH;
#X obj 270 7 loadbang;
#X obj 270 29 t b b;
#X obj 270 122 list append;
#X msg 270 144 protocol_version \$1 \$2;
#X obj 270 166 s \$0.UNPATCH;
#X msg 333 31 getversion;
#X obj 333 53 s UNPATCH;
#X obj 333 75 r UNPATCH;
#X obj 333 97 route version;
#X connect 0 0 5 0;
#X connect 4 0 11 1;
#X connect 5 0 27 0;
#X connect 6 0 8 0;
#X connect 7 0 9 1;
#X connect 8 0 9 0;
#X connect 9 0 11 0;
#X connect 10 0 7 0;
#X connect 11 0 12 0;
#X connect 12 0 28 0;
#X connect 13 0 21 0;
#X connect 14 0 15 0;
#X connect 14 1 23 0;
#X connect 15 0 20 0;
#X connect 15 1 23 0;
#X connect 16 0 14 1;
#X connect 16 1 15 1;
#X connect 17 0 16 0;
#X connect 17 0 24 1;
#X connect 18 0 17 0;
#X connect 19 0 31 0;
#X connect 20 0 19 0;
#X connect 21 0 14 0;
#X connect 21 1 22 1;
#X connect 22 0 24 0;
#X connect 23 0 22 0;
#X connect 24 0 25 0;
#X connect 26 0 13 0;
#X connect 29 0 6 0;
#X connect 30 0 19 1;
#X connect 31 0 1 0;
#X connect 31 1 32 0;
#X connect 32 0 33 0;
#X connect 34 0 35 0;
#X connect 35 0 36 0;
#X connect 35 1 39 0;
#X connect 36 0 37 0;
#X connect 37 0 38 0;
#X connect 39 0 40 0;
#X connect 41 0 42 0;
#X connect 42 0 36 1;
#X restore 10 42 pd negotiate.protocol.version;
#N canvas 842 181 345 262 tell.netpd_head.state 0;
#X obj 125 12 r \$0.UNPATCH;
#X obj 125 34 route synced;
#X obj 12 12 r UNPATCH;
#X obj 12 34 route state;
#X obj 12 56 route isready;
#X obj 12 189 list prepend state;
#X obj 12 211 list trim;
#X obj 12 232 s UNPATCH;
#X msg 152 152 synced;
#X obj 12 126 list append notready;
#X msg 129 102 ready;
#X obj 12 78 bang;
#X obj 125 56 t b b;
#X obj 248 34 inlet;
#X obj 233 99 f;
#X msg 233 121 dsp \$1;
#X obj 233 143 s pd;
#X connect 0 0 1 0;
#X connect 1 0 12 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 11 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 8 0 5 0;
#X connect 9 0 5 0;
#X connect 10 0 9 1;
#X connect 11 0 9 0;
#X connect 12 0 14 0;
#X connect 12 1 10 0;
#X connect 12 1 8 0;
#X connect 13 0 14 1;
#X connect 14 0 15 0;
#X connect 15 0 16 0;
#X restore 10 119 pd tell.netpd_head.state;
#X connect 0 0 4 0;
#X connect 2 0 3 0;
#X connect 3 0 0 0;
#X restore 17 209 pd unpatch_sync;
#X obj 17 283 unpatch-singleton-container;
#N canvas 484 373 191 164 unpatch_version 0;
#X obj 17 12 r UNPATCH;
#X obj 17 34 route getversion;
#X obj 17 82 list prepend version;
#X obj 17 104 list trim;
#X obj 17 126 s UNPATCH;
#X msg 17 59 2 0 0;
#X connect 0 0 1 0;
#X connect 1 0 5 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 5 0 2 0;
#X restore 17 309 pd unpatch_version;
#X obj 17 52 declare -path abs;
